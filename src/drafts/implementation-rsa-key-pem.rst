=========================
JWKからPEMを作る(実装編)
=========================

asn.1 と DER
================

- PEMはbase64エンコードされたDER
- DER: ASN.1 を符号化する形式
- ASN.1: データ構造の記法

DERの表現形式
--------------

- type-length-value形式 > 型-値の長さ-値
- 例えば INTEGER は型の値が 0x02 なので INTEGER 15 をDERで表すと 0x02010F
- 細かいルール
  - BIT STRING の末尾 zero は省略される
  - `RFC5280 <https://tools.ietf.org/html/rfc5280#appendix-B>`_
  - INTEGER は符号ありの整数 > 正の数の場合先頭一ビットが0になっている必要がある

..
  2つの素数を p, q とした時、オイラーのファイ関数を使うと、以下の式が成り立つ

  .. math::

    \phi(n) = (p - 1)(q - 1)

  ここで、 :math:`\phi(n)` は

  正の整数 n と互いに素である 1 以上 n 以下の自然数の個数である

  (最大公約数 gcd(n, x) = 1 となる1 以上 n 以下の自然数xの個数と言い換えても良い)

  簡単な例

  .. math::

    \phi(15) = (3 - 1) * (5 - 1) = 8 = |\{1, 2, 4, 7, 8, 11, 13, 14\}|

  e < phi(n) である
