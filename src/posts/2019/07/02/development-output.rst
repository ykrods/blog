.. post:: 2019-07-01
  :tags: 要件定義, ドキュメンテーション
  :category: Software Development Process

==============================
開発の各工程における成果物
==============================

.. contents::
  :local:

このドキュメントの目的
=======================

受託開発でいつ何を作るんだっけ、というのを整理する。

- WEBシステム開発を想定しています。
- 要素の洗い出しをする意図でまとめており、プロジェクトによっては不要な成果物もあると思われます。

成果物の必要性
===============

- いわゆる「顧客が本当に欲しかったもの」を作るためにはプロジェクトメンバー全員の認識共有が重要であり、認識を共有するために都度全員集めてミーティングを行うよりドキュメントにまとめた方が効率が良い。

  - 実装者の仕様の理解度はコードに反映されるので健全な運用をしたければドキュメントを書いて、共有する。

- 見積もりの精度を上げ、認識齟齬を減らすにはなんらかの形でアウトプットするのが良い
- 各工程での進捗の把握と評価に使う

  - 成果物の完成を以ってその工程が完了、とした方が進捗が分かりやすい

工程ごとの成果物
=================

.. list-table::
  :header-rows: 1
  :widths: 25, 25, 50

  - - 工程
    - 成果物
    - 成果物の内容
  - - 要求定義 / ヒアリング
    - RFP (Request For Proposal, 提案依頼書)
    - - システム導入の目的
      - 組織体制や業務の説明
      - 現状の課題
      - 依頼者のプロジェクト体制・役割
      - 委託範囲
      - 予算規模
      - 提案依頼事項
  - -
    - 提案書
    - - システムの提案
      - プロジェクトの進め方
      - ベンダーのプロジェクト体制・役割
  - - 要件定義
    - 要件定義書
    - * システム概要
      * 機能一覧
      * 業務フロー図
      * 非機能要件
      * 納品対象
      * 現状分析資料
  - - 見積もり
    -
    - * 見積もり
      * スケジュール
      * 前提条件
  - - 外部設計
    - 機能仕様書
    - * 画面・帳票・バッチ各機能の入出力・処理内容
      * ユースケース記述
      * 画面遷移図
      * シークエンス図
      * 連携システムなどの外部資料
  - - 基本設計
    - 基本仕様書
    - * インフラ・ミドルウェア・フレームワーク選定
      * db設計（基本部分）
      * 用語集
      * 状態遷移図
      * システム構成図
      * ネットワーク構成図
      * アーキテクチャ
  - - 詳細設計
    - 技術仕様書
    - * 実装方針
      * モジュール・クラス設計
      * アルゴリズム・ライブラリの選定
      * ロバストネス図
  - - 実装・システム構築
    - システム
    -
  - - テスト設計
    - テスト設計書
    -
  - - テスト
    - テスト実施書
    -
  - - 検収・納品
    - 各成果物の確認
    -

詳細
=====

要求定義 / ヒアリング
--------------------------

顧客の要求をまとめて、システム案と進め方を提案する。

- 個人的な経験としては、RFPおよび提案書は省略され、システム概要の様なパワーポイントの資料をいただく形が多い

  - システム概要的なものが来た場合は、RFPに記載される項目と比較して足りない情報がないか確認しておくと良いと思われる
  - 足りない場合は文章化するところから始めた方が安全（聞けば答えてくれるくらいの状況でも、文章化されていないと顧客内部で合意が取れているか不明なため

- 表に載せたのは業務システム想定だが、BtoCでも項目にターゲットのユーザ層とユーザ価値を内容に加えれば良いと思われる

内容の補足

- プロジェクトの進め方

  - 具体的には以下を決める（合意を取る）。

    - どのような工程を設けるか
    - ツール（課題管理・テキストチャット・ドキュメンテーション）
    - 定例打ち合わせ頻度
    - スケジュール管理方法(WBS など)

  - 工程は表を見てどの情報が揃っているかで必要なものを判断する
  - 認識ずれが起きるリスクがそれなりにありそうな場合、プロトタイプや PoC を作る工程を挟むなど

.. tip::

  提案時の役割

  - 要件定義が必要な場合、大抵業務担当者にヒアリングする人が必要なのでそれを誰がやるかは明確にする

要件定義
----------

開発スコープをFIXさせ、のちの設計と実装の工数が大きくブレないレベルの情報を揃える

- システムの対象外についてもドキュメントか見積もりの前提条件に記載する

内容の補足

- システム全体図

  - 1枚で全体が俯瞰できるもの
  - 内容は書く人によってまちまちな様だが、以下が入っていれば良いと思われる

    1. ユーザ（アクター）
    2. 連携する外部システム・サブシステム
    3. ストレージ(database, ストレージサーバ)

- 機能一覧

  - 詳細な画面設計などは含まれないが、その機能でできる事・できない事が判断できる程度の説明を付記する

- 非機能要件

  - 動作環境（対象ブラウザ）・性能・セキュリティ要件のほか、インフラや外部サービスに指定がある場合、それを記載する

- 業務フロー図

  - 詳細な画面操作などは含まずに対象システムに対してどの業務で何の入出力を行うかを記載する
  - システムのユーザおよび連携システムを想定しやすくなるので基本的に作った方が良いと思われる

- 納品物対象

  - 運用マニュアルが含まれる場合、作成工数が発生するので何をどう納品するかは確定させる

- 現状分析資料

  - 既存システムがある場合のそれに関する資料
  - 要求段階で作成するものな気がするが要件定義と平行で作ることが多い

見積もり
----------

要件に対して工数を見積もり、納品までの計画を立て、スケジュール・金額を提示する。

- 要件定義と外部設計の間に置いたのは、要件定義までは準委任、設計以降は請負で受ける事が多いため
- 小規模なら設計前に見積もりFIXでもなんとかなるが、中〜大規模の場合は開発フェーズを分けて都度見積もりした方が安全

  - 少なくとも画面設計をせずに見積もりするのはそれなりにリスクを伴う
  - フェーズ分けと別の進め方として、プロトタイプを作成するというパターンもあるが、プロトタイプとして作ったものがそのまま本番に転用される流れになってしまう場合があるので少なくとも「捨てる」合意なしではオススメできない
  - (余談) ここ数年で PoC (Proof of Concept) という単語が流行っていて、スモールスタートしようという原義には大変同意できるが、 PoC と言っておきながら初っ端から機能過剰であったり検証と呼べるような数値目標がなかったりするのでなんというかアレな感がある

内容の補足

- 前提条件

  - 概ね「要件にない追加機能は対象外になります」と書く。

- スケジュール

  - 開発期間・テスト期間・検収期間・納期を記載

外部設計
--------

システムの外部（ユーザあるいは連携するシステム）から見て、そのシステムがどの様に振る舞うかを説明する。

内容の補足

- ユースケース記述

  - 業務フロー図との照らし合わせやテスト設計時に利用できる

.. attention::

  内容的に要件定義に含まれる場合もある。

基本設計
---------

システム全体に関わる仕様を決める。

内容の補足

- 用語集

  - 用語の説明とドキュメントでの出現箇所、英訳を記載する
  - 表記揺れの発見や・コーディングでの英訳を統一するのに有用

- アーキテクチャ

  - コーディング規約や命名規則など、開発者が準拠するルール

詳細設計
----------

機能ごとの技術仕様をまとめる。

- 対外向けというより、実装者が計画的に実装するために作る

  - 1タスクが最長でも5人日になるようにタスクを分割すると良いので、分割可能なように設計する

- コードレビューを行う場合、レビュワーは詳細設計のレビューも行うと良い

内容の補足

- ロバストネス図

  - ロバストネス分析する場合

- シークエンス図

  - 外部システムとのやりとりがある場合に有効
  - フロント - WebAPI - db でシークエンス図を書くこともあるが、単純なCRUDなどでは省略可能

まとめ
=======

開発の成果物について、軽い解説をつけて列挙しました。

それぞれのドキュメントをどう書くかという話もありますが、とりあえず計画を立てる時の抜け漏れの防止に使えたらいいなと思います。


(おまけ) 要件定義で気をつけると良い事
=========================================

- 期日になったというだけで要件定義を終わらせると、大抵の場合実質終わっていない

  - 第三者に成果物をレビューしてもらって客観的な評価してもらうのが良さそう

- 顧客にご協力頂かない限り良いシステムを作るのは不可能なので、定例のミーティングを設け、役割を決める等はやった方が良い
- タスクごとのデットラインと、過ぎた場合のリスクを前もって伝える

  - x: いついつまでに終わるように協力ください
  - o: いついつまでに終わらない場合、追加の予算が必要になります/スケジュールが変動します/アサインできない可能性があります

- 相手が忙しそうだとか単純に面倒だとかで突っつくのを躊躇っていると結果的により悪い事態になるので無心で突っついた方がいい

.. update:: 2019-10-06

  進め方について加筆 + ついでに全体を修正
